<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="We are going to use the JAMSTACK and GitHub services in order to build and deploy a blog in 5 minutes and for free."><meta property="og:type" content="article"><meta property="og:title" content="JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><meta property="og:url" content="https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/index.html"><meta property="og:site_name" content="Olivier.codes"><meta property="og:description" content="We are going to use the JAMSTACK and GitHub services in order to build and deploy a blog in 5 minutes and for free."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://olivier.codes/images/deploykeys.png"><meta property="og:image" content="https://olivier.codes/images/secrets.png"><meta property="og:image" content="https://olivier.codes/images/newcommit.png"><meta property="og:image" content="https://olivier.codes/images/workflow.png"><meta property="og:image" content="https://olivier.codes/images/pages.png"><meta property="article:published_time" content="2020-03-28T23:20:54.000Z"><meta property="article:modified_time" content="2020-08-12T12:34:40.115Z"><meta property="article:author" content="Olivier Loverde"><meta property="article:tag" content="jamstack, javascript, webdev, github actions, github pages"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://olivier.codes/images/deploykeys.png"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/rtl.css"><link rel="alternate" href="https://olivier.codes/rss2.xml" title="Olivier.codes" type="application/atom+xml"><meta name="generator" content="Hexo 5.0.2"></head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Writing</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="/2020/04/12/ES2020-Summary-of-new-features-with-examples/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" href="/2020/03/28/hello-world/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&text=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&is_video=false&description=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions&body=Check out this article: https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&name=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions&description="><i class="fab fa-tumblr" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&t=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-hacker-news" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Overview-of-the-stack"><span class="toc-number">2.</span> <span class="toc-text">Overview of the stack</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-JAMSTACK"><span class="toc-number">2.1.</span> <span class="toc-text">The JAMSTACK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-Hexo"><span class="toc-number">2.2.</span> <span class="toc-text">What is Hexo?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitHub-Pages"><span class="toc-number">2.3.</span> <span class="toc-text">GitHub Pages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitHub-Actions"><span class="toc-number">2.4.</span> <span class="toc-text">GitHub Actions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Getting-started"><span class="toc-number">3.</span> <span class="toc-text">Getting started</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-Hexo-and-repo"><span class="toc-number">3.1.</span> <span class="toc-text">Setting up Hexo and repo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-automatic-build"><span class="toc-number">3.2.</span> <span class="toc-text">Setting up automatic build</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-GitHub-Pages"><span class="toc-number">3.3.</span> <span class="toc-text">Setting up GitHub Pages</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Summary"><span class="toc-number">4.</span> <span class="toc-text">Summary</span></a></li></ol></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Olivier.codes</span></span><div class="postdate"><time datetime="2020-03-28T23:20:54.000Z" itemprop="datePublished">2020-03-28</time></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link-link" href="/tags/jamstack-javascript-webdev-github-actions-github-pages/" rel="tag">jamstack, javascript, webdev, github actions, github pages</a></div></div></header><div class="content" itemprop="articleBody"><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>In this article, we are going to use the JAMSTACK and GitHub services in order to build and deploy a blog in 5 minutes and for free. We will also make the deployment automatic (for free too !).</p><h1 id="Overview-of-the-stack"><a href="#Overview-of-the-stack" class="headerlink" title="Overview of the stack"></a>Overview of the stack</h1><h2 id="The-JAMSTACK"><a href="#The-JAMSTACK" class="headerlink" title="The JAMSTACK"></a>The JAMSTACK</h2><blockquote><p>Fast and secure sites and apps delivered by pre-rendering files and serving them directly from a CDN, removing the requirement to manage or run web servers.</p></blockquote><p>Source: <a target="_blank" rel="noopener" href="https://jamstack.org/">https://jamstack.org/</a></p><p>The general idea behing the JAMSTACK is to use a tool for pre-compiling all the pages of a website (a blog in our case) during build time and push it directly to a static server (such as Github Pages, a CDN, a S3 bucket, etc.). The tool will re-build the entire website everytime something change (new post blog for example).</p><h2 id="What-is-Hexo"><a href="#What-is-Hexo" class="headerlink" title="What is Hexo?"></a>What is Hexo?</h2><p>We will use <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> as our main generating tool:</p><blockquote><p>A fast, simple &amp; powerful blog framework</p></blockquote><p>Hexo provides a simple CLI for creating a blog. The CLI has the following features:</p><ul><li>Creating a new page <code>hexo new page &quot;about&quot;</code></li><li>Creating a new blog post <code>hexo new post &quot;Hello world&quot;</code></li><li>Generating the static source <code>hexo generate</code></li><li>Clean the static source <code>hexo clean</code></li></ul><h2 id="GitHub-Pages"><a href="#GitHub-Pages" class="headerlink" title="GitHub Pages"></a>GitHub Pages</h2><p>We will use <a target="_blank" rel="noopener" href="https://pages.github.com/">GitHub Pages</a> for hosting our website:</p><ul><li>We can use a custom domain (cost 10$ on Gandi)</li><li>Or we can use the domain offered by GitHub: https://<username>.github.io</username></li></ul><h2 id="GitHub-Actions"><a href="#GitHub-Actions" class="headerlink" title="GitHub Actions"></a>GitHub Actions</h2><p>We will use <a target="_blank" rel="noopener" href="https://github.com/features/actions">GitHub Actions</a> so that any changes made to the Git Repository will trigger automatically a build of our blog and push it to GitHub Pages.</p><h1 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h1><h2 id="Setting-up-Hexo-and-repo"><a href="#Setting-up-Hexo-and-repo" class="headerlink" title="Setting up Hexo and repo"></a>Setting up Hexo and repo</h2><p>First, clone Hexo and install it locally:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ yarn install</span><br></pre></td></tr></table></figure><p>Create a <code>.gitignore</code> file:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules&#x2F;</span><br><span class="line">public&#x2F;</span><br><span class="line">.deploy*&#x2F;</span><br></pre></td></tr></table></figure><p>If you have a personal domain name, create a new empty GitHub repository named <code>&lt;yourdomain&gt;</code> (e.g: olivier.codes)</p><p>If you do not have a domain name, GitHub offers free .github.io subdomain. You will need to use your username: <code>&lt;username&gt;.github.io</code> as name for your GitHub repository.</p><p>The repository must be public in order to use GitHub Pages for free.</p><p>Now link your local directory with the new GitHub repository:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ git init</span><br><span class="line">$ git remote add origin remote repository &lt;URL&gt;</span><br></pre></td></tr></table></figure><p>Verify the new remote URL:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure><p>If you have used a personal domain name, you need to create a file named <code>CNAME</code> in <code>source</code>. It will be important for the deployment phase to GitHub Pages. The CNAME file should have the domain used in it :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">olivier.codes</span><br></pre></td></tr></table></figure><p>Push all codes to the repository:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add -A</span><br><span class="line">$ git commit -am &#39;First commit: Init Hexo&#39;</span><br><span class="line">$ git push</span><br></pre></td></tr></table></figure><p>You can now see your blog locally at <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a> by running: <code>hexo server</code></p><p>You can build the static assets by running: <code>hexo generate</code>, it will create a <code>public</code> folder with all the pre-compiled files. We now need to generate the files automatically on each push and push the generated files to GitHub Pages so it’s live online.</p><h2 id="Setting-up-automatic-build"><a href="#Setting-up-automatic-build" class="headerlink" title="Setting up automatic build"></a>Setting up automatic build</h2><p>Let’s use GitHub Actions for automating the build step on every push to the git repository.</p><p>GitHub Actions are defined by Workflow YAML file describing what to do and when to do it.</p><p>Our YAML file should have the following steps:</p><ol><li>Start a linux distribution (such as ubuntu)</li><li>Install Nodejs LTS</li><li>Load yarn cache if any (used for speeding up build time when yarn.lock do not changes)</li><li>Install yarn dependencies (and use cache if any)</li><li>Clean Hexo</li><li>Generate Hexo files</li><li>Push files to GitHub Pages</li></ol><p>Create a file for the workflow, it must bbe in <code>.github/workflows</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch .github&#x2F;workflow&#x2F;main.yml</span><br></pre></td></tr></table></figure><p>Edit <code>main.yml</code> and add:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>]</span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">        <span class="attr">matrix:</span></span><br><span class="line">            <span class="attr">node-version:</span> [<span class="number">12</span>]</span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node-version</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">          <span class="attr">with:</span></span><br><span class="line">              <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node-version</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">yarn</span> <span class="string">cache</span> <span class="string">directory</span> <span class="string">path</span></span><br><span class="line">          <span class="attr">id:</span> <span class="string">yarn-cache-dir-path</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;::set-output name=dir::$(yarn cache dir)&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/cache@v1</span></span><br><span class="line">          <span class="attr">with:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.yarn-cache-dir-path.outputs.dir</span> <span class="string">&#125;&#125;</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-yarn-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/yarn.lock&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">              <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line">                  <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-yarn-</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span> <span class="string">--frozen-lockfile</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Clean</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">./node_modules/.bin/hexo</span> <span class="string">clean</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Generate</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">./node_modules/.bin/hexo</span> <span class="string">generate</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Github</span> <span class="string">Pages</span></span><br><span class="line">          <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v2.1.0</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="attr">ACTIONS_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_GH_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">            <span class="attr">PUBLISH_BRANCH:</span> <span class="string">gh-pages</span></span><br><span class="line">            <span class="attr">PUBLISH_DIR:</span> <span class="string">./public</span></span><br></pre></td></tr></table></figure><p>Every push on master will trigger this GitHub Action, it will generate the files and push it to <code>gh-pages</code> branche on the repository.</p><p>The newly created workflow needs a deploy key to be enable to push generated files to <code>gh-pages</code> branche. The deploy key will be available to the workflow by using a GitHub Secret.</p><p>We need to create a RSA key pairs for the deploy key:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;&lt;youremail&gt;@gmail.com&quot;</span><br></pre></td></tr></table></figure><p><img src="/images/deploykeys.png"></p><ul><li>Go to your repository on GitHub</li><li>Go to Settings section</li><li>Go to “Deploy keys” sub-section</li><li>Add a new key by pasting the content of <code>id_rsa.pub</code></li></ul><p><img src="/images/secrets.png"></p><p>Now, let’s create the secret for our workflow:</p><ul><li>Go to your repository on GitHub</li><li>Go to Settings section</li><li>Go to “Secret” sub-section</li><li>Create a new secret button</li><li>Use the following name: <code>DEPLOY_GH_KEY</code> as key</li><li>Use the content of <code>id_rsa</code> file (the secret key this time) as value</li></ul><p>We have :</p><ol><li>Created a complete hexo setup</li><li>Created a deploy key, saved it in GitHub using the public key</li><li>Declared the corresponding private key in our secrets</li><li>Created a workflow to automatically generate files on every git push and push them to <code>gh-pages</code> branche</li></ol><p>Let’s test our new setup:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add -A</span><br><span class="line">$ git commit -am &#39;Devops: Add build automation&#39;</span><br><span class="line">$ git push</span><br></pre></td></tr></table></figure><p>You should now see the workflow running for the new commit:<br><img src="/images/newcommit.png"></p><p>Or in Actions section:<br><img src="/images/workflow.png"></p><p>The workflow should pass, indicating a that files have been generated and push to the branche.</p><h2 id="Setting-up-GitHub-Pages"><a href="#Setting-up-GitHub-Pages" class="headerlink" title="Setting up GitHub Pages"></a>Setting up GitHub Pages</h2><p>Our <code>gh-pages</code> branche will be the home of our GitHub Pages.</p><p><img src="/images/pages.png"></p><p>Let’s configure GitHub Pages:</p><ul><li>Go to your repository on GitHub</li><li>Go to Settings section</li><li>Go to Options sub-section</li><li>Scroll down to <code>GitHub Pages</code></li><li>Select <code>gh-pages</code> in source</li><li>Optionnaly, fill your custom domain if you have any and enforce HTTPS</li></ul><p>It is now LIVE ! Go to your custom domain or go to <code>&lt;username&gt;.github.io</code></p><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>You now have a fully working blog, deployed automatically everytime you push something on git!</p><p>You can find more information about Hexo (adding theme, plugins, etc.) directly in their doc: <a target="_blank" rel="noopener" href="https://hexo.io/docs/">https://hexo.io/docs/</a></p><p>Full source code for this article is available here: <a target="_blank" rel="noopener" href="https://github.com/olivierloverde/olivier.codes">https://github.com/olivierloverde/olivier.codes</a></p><p>Happy blogging!</p></div></article><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Writing</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Overview-of-the-stack"><span class="toc-number">2.</span> <span class="toc-text">Overview of the stack</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-JAMSTACK"><span class="toc-number">2.1.</span> <span class="toc-text">The JAMSTACK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-Hexo"><span class="toc-number">2.2.</span> <span class="toc-text">What is Hexo?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitHub-Pages"><span class="toc-number">2.3.</span> <span class="toc-text">GitHub Pages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitHub-Actions"><span class="toc-number">2.4.</span> <span class="toc-text">GitHub Actions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Getting-started"><span class="toc-number">3.</span> <span class="toc-text">Getting started</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-Hexo-and-repo"><span class="toc-number">3.1.</span> <span class="toc-text">Setting up Hexo and repo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-automatic-build"><span class="toc-number">3.2.</span> <span class="toc-text">Setting up automatic build</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-GitHub-Pages"><span class="toc-number">3.3.</span> <span class="toc-text">Setting up GitHub Pages</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Summary"><span class="toc-number">4.</span> <span class="toc-text">Summary</span></a></li></ol></div><div id="share-footer" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&text=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&is_video=false&description=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions&body=Check out this article: https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&title=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&name=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://olivier.codes/2020/03/28/Jamstack-create-a-scalable-blog-in-5-minutes-for-free-and-with-automatic-deployment-using-Hexo-Github-Pages-and-Github-Actions/&t=JAMSTACK: create a scalable blog in 5 minutes for free and with automatic deployment using Hexo, GitHub Pages and GitHub Actions"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2020 Olivier Loverde</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Writing</a></li><li><a href="rss2.xml"><i class="fas fa-rss"></i></a></li></ul></nav></div></footer></div><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="/lib/jquery/jquery.min.js"></script><script src="lib/instantclick/instantclick.min.js" data-no-instant></script><script data-no-instant>InstantClick.init()</script><script src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">$(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })</script><script src="/js/main.js"></script><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-39110335-4","auto"),ga("send","pageview")</script></body></html>